name: Stable Release Step 2 - Validate PR

on:
    workflow_dispatch:

jobs:
  Confirm-All-Tests-Passed:
    runs-on: ubuntu-latest
    steps:
    - name: Check out code
      uses: actions/checkout@v4
    - name: Merge The PR
      run: |
          echo "update dev-branch from stable"
          git checkout origin/dev-branch;
          git config core.hooksPath .githooks;
          bash .githooks/pre-commit;
          gh pr update-branch dev-branch
          echo "enable and explicitly run hooks in stable"
          git checkout origin/stable;
          git config core.hooksPath .githooks;
          bash .githooks/pre-commit;
          echo "merge the pull request bringing dev-branch into stable"
          gh pr merge dev-branch --merge --subject 'Stable Release Merge';
      env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

# on a monthly pr created from other workflow
# test validity of install
# down the road-test various functions (deploy, capture, API)
# Fix version if needed
# merge pull request with generic commit
# maybe update version if not handled in hook
